{"version":3,"file":"Tab.vue_vue_type_script_setup_true_lang.ebb0cf62.js","sources":["../../../../node_modules/.pnpm/fp-ts@2.12.1/node_modules/fp-ts/es6/Predicate.js","../../../hoppscotch-common/src/components/smart/Tabs.vue","../../../hoppscotch-common/src/components/smart/Tab.vue"],"sourcesContent":["import { constFalse, constTrue, flow, pipe } from './function';\n// -------------------------------------------------------------------------------------\n// type class members\n// -------------------------------------------------------------------------------------\nvar contramap_ = function (predicate, f) { return pipe(predicate, contramap(f)); };\n/**\n * @category Contravariant\n * @since 2.11.0\n */\nexport var contramap = function (f) { return function (predicate) { return flow(f, predicate); }; };\n// -------------------------------------------------------------------------------------\n// instances\n// -------------------------------------------------------------------------------------\n/**\n * @category instances\n * @since 2.11.0\n */\nexport var URI = 'Predicate';\n/**\n * @category instances\n * @since 2.11.0\n */\nexport var getSemigroupAny = function () { return ({\n    concat: function (first, second) { return pipe(first, or(second)); }\n}); };\n/**\n * @category instances\n * @since 2.11.0\n */\nexport var getMonoidAny = function () { return ({\n    concat: getSemigroupAny().concat,\n    empty: constFalse\n}); };\n/**\n * @category instances\n * @since 2.11.0\n */\nexport var getSemigroupAll = function () { return ({\n    concat: function (first, second) { return pipe(first, and(second)); }\n}); };\n/**\n * @category instances\n * @since 2.11.0\n */\nexport var getMonoidAll = function () { return ({\n    concat: getSemigroupAll().concat,\n    empty: constTrue\n}); };\n/**\n * @category instances\n * @since 2.11.0\n */\nexport var Contravariant = {\n    URI: URI,\n    contramap: contramap_\n};\n// -------------------------------------------------------------------------------------\n// utils\n// -------------------------------------------------------------------------------------\n/**\n * @since 2.11.0\n */\nexport var not = function (predicate) { return function (a) { return !predicate(a); }; };\n/**\n * @since 2.11.0\n */\nexport var or = function (second) { return function (first) { return function (a) { return first(a) || second(a); }; }; };\n/**\n * @since 2.11.0\n */\nexport var and = function (second) { return function (first) { return function (a) { return first(a) && second(a); }; }; };\n","<template>\n  <div\n    class=\"flex flex-1 h-full flex-nowrap\"\n    :class=\"{ 'flex-col h-auto': !vertical }\"\n  >\n    <div\n      class=\"relative tabs border-dividerLight\"\n      :class=\"[vertical ? 'border-r' : 'border-b', styles]\"\n    >\n      <div class=\"flex flex-1\">\n        <div\n          class=\"flex justify-between flex-1\"\n          :class=\"{ 'flex-col': vertical }\"\n        >\n          <div class=\"flex\" :class=\"{ 'flex-col space-y-2 p-2': vertical }\">\n            <button\n              v-for=\"([tabID, tabMeta], index) in tabEntries\"\n              :key=\"`tab-${index}`\"\n              v-tippy=\"{\n                theme: 'tooltip',\n                placement: 'left',\n                content: vertical ? tabMeta.label : null,\n              }\"\n              class=\"tab\"\n              :class=\"[\n                { active: modelValue === tabID },\n                { vertical: vertical },\n                { 'opacity-75 !cursor-not-allowed': tabMeta.disabled },\n              ]\"\n              :aria-label=\"tabMeta.label || ''\"\n              :disabled=\"tabMeta.disabled\"\n              role=\"button\"\n              @keyup.enter=\"selectTab(tabID)\"\n              @click=\"selectTab(tabID)\"\n            >\n              <component\n                :is=\"tabMeta.icon\"\n                v-if=\"tabMeta.icon\"\n                class=\"svg-icons\"\n              />\n              <span v-else-if=\"tabMeta.label\">{{ tabMeta.label }}</span>\n              <span\n                v-if=\"tabMeta.info && tabMeta.info !== 'null'\"\n                class=\"tab-info\"\n              >\n                {{ tabMeta.info }}\n              </span>\n              <span\n                v-if=\"tabMeta.indicator\"\n                class=\"w-1 h-1 ml-2 rounded-full bg-accentLight\"\n              ></span>\n            </button>\n          </div>\n          <div class=\"flex items-center justify-center\">\n            <slot name=\"actions\"></slot>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div\n      class=\"w-full h-full contents\"\n      :class=\"[\n        {\n          '!flex flex-col flex-1 overflow-y-auto': vertical,\n        },\n        contentStyles,\n      ]\"\n    >\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { pipe } from \"fp-ts/function\"\nimport { not } from \"fp-ts/Predicate\"\nimport * as A from \"fp-ts/Array\"\nimport * as O from \"fp-ts/Option\"\nimport type { Component } from \"vue\"\nimport { ref, ComputedRef, computed, provide } from \"vue\"\nimport { throwError } from \"~/helpers/functional/error\"\n\nexport type TabMeta = {\n  label: string | null\n  icon: string | Component | null\n  indicator: boolean\n  info: string | null\n  disabled: boolean\n}\n\nexport type TabProvider = {\n  // Whether inactive tabs should remain rendered\n  renderInactive: ComputedRef<boolean>\n  activeTabID: ComputedRef<string>\n  addTabEntry: (tabID: string, meta: TabMeta) => void\n  updateTabEntry: (tabID: string, newMeta: TabMeta) => void\n  removeTabEntry: (tabID: string) => void\n}\n\nconst props = defineProps({\n  styles: {\n    type: String,\n    default: \"\",\n  },\n  renderInactiveTabs: {\n    type: Boolean,\n    default: false,\n  },\n  vertical: {\n    type: Boolean,\n    default: false,\n  },\n  modelValue: {\n    type: String,\n    required: true,\n  },\n  contentStyles: {\n    type: String,\n    default: \"\",\n  },\n})\n\nconst emit = defineEmits<{\n  (e: \"update:modelValue\", newTabID: string): void\n}>()\n\nconst tabEntries = ref<Array<[string, TabMeta]>>([])\n\nconst addTabEntry = (tabID: string, meta: TabMeta) => {\n  tabEntries.value = pipe(\n    tabEntries.value,\n    O.fromPredicate(not(A.exists(([id]) => id === tabID))),\n    O.map(A.append([tabID, meta] as [string, TabMeta])),\n    O.getOrElseW(() => throwError(`Tab with duplicate ID created: '${tabID}'`))\n  )\n}\n\nconst updateTabEntry = (tabID: string, newMeta: TabMeta) => {\n  tabEntries.value = pipe(\n    tabEntries.value,\n    A.findIndex(([id]) => id === tabID),\n    O.chain((index) =>\n      pipe(\n        tabEntries.value,\n        A.updateAt(index, [tabID, newMeta] as [string, TabMeta])\n      )\n    ),\n    O.getOrElseW(() => throwError(`Failed to update tab entry: ${tabID}`))\n  )\n}\n\nconst removeTabEntry = (tabID: string) => {\n  tabEntries.value = pipe(\n    tabEntries.value,\n    A.findIndex(([id]) => id === tabID),\n    O.chain((index) => pipe(tabEntries.value, A.deleteAt(index))),\n    O.getOrElseW(() => throwError(`Failed to remove tab entry: ${tabID}`))\n  )\n\n  // If we tried to remove the active tabEntries, switch to first tab entry\n  if (props.modelValue === tabID)\n    if (tabEntries.value.length > 0) selectTab(tabEntries.value[0][0])\n}\n\nprovide<TabProvider>(\"tabs-system\", {\n  renderInactive: computed(() => props.renderInactiveTabs),\n  activeTabID: computed(() => props.modelValue),\n  addTabEntry,\n  updateTabEntry,\n  removeTabEntry,\n})\n\nconst selectTab = (id: string) => {\n  emit(\"update:modelValue\", id)\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.tabs {\n  @apply flex;\n  @apply whitespace-nowrap;\n  @apply overflow-auto;\n  @apply flex-shrink-0;\n\n  .tab {\n    @apply relative;\n    @apply flex;\n    @apply flex-shrink-0;\n    @apply items-center;\n    @apply justify-center;\n    @apply py-2 px-4;\n    @apply text-secondary;\n    @apply font-semibold;\n    @apply cursor-pointer;\n    @apply hover: text-secondaryDark;\n    @apply focus: outline-none;\n    @apply focus-visible: text-secondaryDark;\n    @apply after:absolute;\n    @apply after:left-4;\n    @apply after:right-4;\n    @apply after:bottom-0;\n    @apply after:bg-transparent;\n    @apply after:z-2;\n    @apply after:h-0.5;\n    @apply after:content-DEFAULT;\n    @apply focus: after: bg-divider;\n\n    .tab-info {\n      @apply inline-flex;\n      @apply items-center;\n      @apply justify-center;\n      @apply w-5;\n      @apply h-4;\n      @apply ml-2;\n      @apply text-8px;\n      @apply border border-divider;\n      @apply rounded;\n      @apply text-secondaryLight;\n    }\n\n    &.active {\n      @apply text-secondaryDark;\n      @apply after:bg-accent;\n\n      .tab-info {\n        @apply text-secondary;\n        @apply border-dividerDark;\n      }\n    }\n\n    &.vertical {\n      @apply p-2;\n      @apply rounded;\n      @apply focus: after: hidden;\n\n      &.active {\n        @apply text-accent;\n        @apply after:hidden;\n\n        .tab-info {\n          @apply text-secondary;\n          @apply border-dividerDark;\n        }\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <div v-if=\"shouldRender\" v-show=\"active\" class=\"flex flex-col flex-1\">\n    <slot></slot>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  onMounted,\n  onBeforeUnmount,\n  inject,\n  computed,\n  watch,\n  Component,\n  markRaw,\n} from \"vue\"\nimport { TabMeta, TabProvider } from \"./Tabs.vue\"\n\nconst props = withDefaults(\n  defineProps<{\n    id: string\n    label: string\n    icon?: Component | object | string | null\n    info?: string | null\n    indicator?: boolean\n    disabled?: boolean\n  }>(),\n  {\n    icon: null,\n    indicator: false,\n    info: null,\n    disabled: false,\n  }\n)\n\nconst tabMeta = computed<TabMeta>(() => ({\n  // props.icon can store a component, which should not be made deeply reactive\n  icon:\n    props.icon && typeof props.icon === \"object\"\n      ? markRaw(props.icon)\n      : props.icon,\n\n  indicator: props.indicator,\n  info: props.info,\n  label: props.label,\n  disabled: props.disabled,\n}))\n\nconst {\n  activeTabID,\n  renderInactive,\n  addTabEntry,\n  updateTabEntry,\n  removeTabEntry,\n} = inject<TabProvider>(\"tabs-system\")!\n\nconst active = computed(() => activeTabID.value === props.id)\n\nconst shouldRender = computed(() => {\n  // If render inactive is true, then it should be rendered nonetheless\n  if (renderInactive.value) return true\n\n  // Else, return whatever is the active state\n  return active.value\n})\n\nonMounted(() => {\n  addTabEntry(props.id, tabMeta.value)\n})\n\nwatch(tabMeta, (newMeta) => {\n  updateTabEntry(props.id, newMeta)\n})\n\nonBeforeUnmount(() => {\n  removeTabEntry(props.id)\n})\n</script>\n"],"names":["not","predicate","tabEntries","ref","addTabEntry","tabID","meta","pipe","O.fromPredicate","A.exists","id","O.map","A.append","O.getOrElseW","throwError","updateTabEntry","newMeta","A.findIndex","O.chain","index","A.updateAt","removeTabEntry","A.deleteAt","props","selectTab","provide","computed","emit","tabMeta","markRaw","activeTabID","renderInactive","inject","active","shouldRender","onMounted","watch","onBeforeUnmount"],"mappings":"gTA8DU,IAACA,EAAM,SAAUC,EAAW,CAAE,OAAO,SAAU,EAAG,CAAE,MAAO,CAACA,EAAU,CAAC,EAAK,kfCgEtFC,EAAAC,EAAA,CAAA,CAAA,EAEAC,EAAA,CAAAC,EAAAC,IAAA,CACEJ,EAAA,MAAAK,EAAmBL,EAAA,MACNM,EAAAR,EAAAS,EAAA,CAAA,CAAAC,CAAA,IAAAA,IAAAL,CAAA,CAAA,CAAA,EAC0CM,EAAAC,EAAA,CAAAP,EAAAC,CAAA,CAAA,CAAA,EACHO,EAAA,IAAAC,EAAA,mCAAAT,IAAA,CAAA,CACwB,CAC5E,EAGFU,EAAA,CAAAV,EAAAW,IAAA,CACEd,EAAA,MAAAK,EAAmBL,EAAA,MACNe,EAAA,CAAA,CAAAP,CAAA,IAAAA,IAAAL,CAAA,EACuBa,EAChCC,GAAAZ,EACAL,EAAA,MACakB,EAAAD,EAAA,CAAAd,EAAAW,CAAA,CAAA,CAC4C,CACzD,EACFH,EAAA,IAAAC,EAAA,+BAAAT,GAAA,CAAA,CACqE,CACvE,EAGFgB,EAAAhB,GAAA,CACEH,EAAA,MAAAK,EAAmBL,EAAA,MACNe,EAAA,CAAA,CAAAP,CAAA,IAAAA,IAAAL,CAAA,EACuBa,EAAAC,GAAAZ,EAAAL,EAAA,MAAAoB,EAAAH,CAAA,CAAA,CAAA,EAC0BN,EAAA,IAAAC,EAAA,+BAAAT,GAAA,CAAA,CACS,EAIvEkB,EAAA,aAAAlB,GACEH,EAAA,MAAA,OAAA,GAAiCsB,EAAAtB,EAAA,MAAA,GAAA,EAAA,CAAgC,EAGrEuB,EAAA,cAAA,CAAoC,eAAAC,EAAA,IAAAH,EAAA,kBAAA,EACqB,YAAAG,EAAA,IAAAH,EAAA,UAAA,EACX,YAAAnB,EAC5C,eAAAW,EACA,eAAAM,CACA,CAAA,EAGF,MAAAG,EAAAd,GAAA,CACEiB,EAAA,oBAAAjB,CAAA,CAA4B,27CC1I9BkB,EAAAF,EAAA,KAAA,CAAyC,KAAAH,EAAA,MAAA,OAAAA,EAAA,MAAA,SAAAM,EAAAN,EAAA,IAAA,EAAAA,EAAA,KAK3B,UAAAA,EAAA,UAEK,KAAAA,EAAA,KACL,MAAAA,EAAA,MACC,SAAAA,EAAA,QACG,EAAA,EAGlB,CAAM,YAAAO,EACJ,eAAAC,EACA,YAAA3B,EACA,eAAAW,EACA,eAAAM,CACA,EAAAW,EAAA,aAAA,EAGFC,EAAAP,EAAA,IAAAI,EAAA,QAAAP,EAAA,EAAA,EAEAW,EAAAR,EAAA,IAEEK,EAAA,MAA0B,GAG1BE,EAAA,KAAc,EAGhB,OAAAE,EAAA,IAAA,CACE/B,EAAAmB,EAAA,GAAAK,EAAA,KAAA,CAAmC,CAAA,EAGrCQ,EAAAR,EAAAZ,GAAA,CACED,EAAAQ,EAAA,GAAAP,CAAA,CAAgC,CAAA,EAGlCqB,EAAA,IAAA,CACEhB,EAAAE,EAAA,EAAA,CAAuB,CAAA"}