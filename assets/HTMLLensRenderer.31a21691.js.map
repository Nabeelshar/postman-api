{"version":3,"file":"HTMLLensRenderer.31a21691.js","sources":["../../../hoppscotch-common/src/components/lenses/renderers/HTMLLensRenderer.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col flex-1\">\n    <div\n      class=\"sticky z-10 flex items-center justify-between flex-shrink-0 pl-4 overflow-x-auto border-b bg-primary border-dividerLight top-lowerSecondaryStickyFold\"\n    >\n      <label class=\"font-semibold truncate text-secondaryLight\">\n        {{ t(\"response.body\") }}\n      </label>\n      <div class=\"flex\">\n        <ButtonSecondary\n          v-if=\"response.body\"\n          v-tippy=\"{ theme: 'tooltip' }\"\n          :title=\"t('state.linewrap')\"\n          :class=\"{ '!text-accent': linewrapEnabled }\"\n          :icon=\"IconWrapText\"\n          @click.prevent=\"linewrapEnabled = !linewrapEnabled\"\n        />\n        <ButtonSecondary\n          v-if=\"response.body\"\n          v-tippy=\"{ theme: 'tooltip', allowHTML: true }\"\n          :title=\"`${\n            previewEnabled ? t('hide.preview') : t('response.preview_html')\n          } <kbd>${getSpecialKey()}</kbd><kbd>Shift</kbd><kbd>P</kbd>`\"\n          :icon=\"!previewEnabled ? IconEye : IconEyeOff\"\n          @click.prevent=\"togglePreview\"\n        />\n        <ButtonSecondary\n          v-if=\"response.body\"\n          v-tippy=\"{ theme: 'tooltip', allowHTML: true }\"\n          :title=\"`${t(\n            'action.download_file'\n          )} <kbd>${getSpecialKey()}</kbd><kbd>J</kbd>`\"\n          :icon=\"downloadIcon\"\n          @click=\"downloadResponse\"\n        />\n        <ButtonSecondary\n          v-if=\"response.body\"\n          v-tippy=\"{ theme: 'tooltip', allowHTML: true }\"\n          :title=\"`${t(\n            'action.copy'\n          )} <kbd>${getSpecialKey()}</kbd><kbd>.</kbd>`\"\n          :icon=\"copyIcon\"\n          @click=\"copyResponse\"\n        />\n      </div>\n    </div>\n    <div\n      v-show=\"!previewEnabled\"\n      ref=\"htmlResponse\"\n      class=\"flex flex-col flex-1\"\n    ></div>\n    <iframe\n      v-show=\"previewEnabled\"\n      ref=\"previewFrame\"\n      class=\"covers-response\"\n      src=\"about:blank\"\n      loading=\"lazy\"\n      sandbox=\"\"\n    ></iframe>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport IconWrapText from \"~icons/lucide/wrap-text\"\nimport IconEye from \"~icons/lucide/eye\"\nimport IconEyeOff from \"~icons/lucide/eye-off\"\nimport { ref, reactive } from \"vue\"\nimport {\n  usePreview,\n  useResponseBody,\n  useCopyResponse,\n  useDownloadResponse,\n} from \"@composables/lens-actions\"\nimport { useCodemirror } from \"@composables/codemirror\"\nimport { useI18n } from \"@composables/i18n\"\nimport type { HoppRESTResponse } from \"~/helpers/types/HoppRESTResponse\"\nimport { defineActionHandler } from \"~/helpers/actions\"\nimport { getPlatformSpecialKey as getSpecialKey } from \"~/helpers/platformutils\"\n\nconst t = useI18n()\n\nconst props = defineProps<{\n  response: HoppRESTResponse & { type: \"success\" | \"fail\" }\n}>()\n\nconst htmlResponse = ref<any | null>(null)\nconst linewrapEnabled = ref(true)\n\nconst { responseBodyText } = useResponseBody(props.response)\nconst { downloadIcon, downloadResponse } = useDownloadResponse(\n  \"text/html\",\n  responseBodyText\n)\nconst { previewFrame, previewEnabled, togglePreview } = usePreview(\n  false,\n  responseBodyText\n)\nconst { copyIcon, copyResponse } = useCopyResponse(responseBodyText)\n\nuseCodemirror(\n  htmlResponse,\n  responseBodyText,\n  reactive({\n    extendedEditorConfig: {\n      mode: \"htmlmixed\",\n      readOnly: true,\n      lineWrapping: linewrapEnabled,\n    },\n    linter: null,\n    completer: null,\n    environmentHighlights: true,\n  })\n)\n\ndefineActionHandler(\"response.preview.toggle\", () => togglePreview())\ndefineActionHandler(\"response.file.download\", () => downloadResponse())\ndefineActionHandler(\"response.copy\", () => copyResponse())\n</script>\n\n<style lang=\"scss\" scoped>\n.covers-response {\n  @apply bg-white;\n  @apply h-full;\n  @apply w-full;\n  @apply border;\n  @apply border-dividerLight;\n  @apply z-5;\n}\n</style>\n"],"names":["t","useI18n","htmlResponse","ref","linewrapEnabled","responseBodyText","useResponseBody","props","downloadIcon","downloadResponse","useDownloadResponse","previewFrame","previewEnabled","togglePreview","usePreview","copyIcon","copyResponse","useCopyResponse","useCodemirror","reactive","defineActionHandler"],"mappings":"4xCA+EAA,EAAAC,IAMAC,EAAAC,EAAA,IAAA,EACAC,EAAAD,EAAA,EAAA,EAEA,CAAA,iBAAAE,CAAA,EAAAC,EAAAC,EAAA,QAAA,EACA,CAAA,aAAAC,EAAA,iBAAAC,CAAA,EAAAC,EAA2C,YACzCL,CACA,EAEF,CAAA,aAAAM,EAAA,eAAAC,EAAA,cAAAC,CAAA,EAAAC,EAAwD,GACtDT,CACA,EAEF,CAAA,SAAAU,EAAA,aAAAC,CAAA,EAAAC,EAAAZ,CAAA,EAEA,OAAAa,EAAAhB,EACEG,EACAc,EAAA,CACS,qBAAA,CACe,KAAA,YACd,SAAA,GACI,aAAAf,CACI,EAChB,OAAA,KACQ,UAAA,KACG,sBAAA,EACY,CAAA,CACxB,EAGHgB,EAAA,0BAAA,IAAAP,EAAA,CAAA,EACAO,EAAA,yBAAA,IAAAX,EAAA,CAAA,EACAW,EAAA,gBAAA,IAAAJ,EAAA,CAAA"}