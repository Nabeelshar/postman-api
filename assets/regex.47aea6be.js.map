{"version":3,"file":"regex.47aea6be.js","sources":["../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_trimmedEndIndex.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseTrim.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/toNumber.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/now.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/debounce.js","../../../hoppscotch-common/src/components/realtime/LogEntry.vue","../../../hoppscotch-common/src/components/realtime/Log.vue"],"sourcesContent":["/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","<template>\n  <div v-if=\"entry\" class=\"divide-y divide-dividerLight\">\n    <div :style=\"{ color: entryColor }\" class=\"realtime-log\">\n      <div class=\"flex group\">\n        <div class=\"flex flex-1 divide-x divide-dividerLight\">\n          <div class=\"inline-flex items-center p-2\">\n            <component\n              :is=\"icon\"\n              :style=\"{ color: iconColor }\"\n              @click=\"copyQuery(entry.payload)\"\n            />\n          </div>\n          <div\n            v-if=\"entry.ts !== undefined\"\n            class=\"items-center hidden px-1 w-34 sm:inline-flex\"\n          >\n            <span\n              v-tippy=\"{ theme: 'tooltip' }\"\n              :title=\"relativeTime\"\n              class=\"mx-auto truncate ts-font text-secondaryLight hover:text-secondary hover:text-center\"\n            >\n              {{ shortDateTime(entry.ts) }}\n            </span>\n          </div>\n          <div\n            class=\"inline-grid items-center flex-1 min-w-0 p-2\"\n            @click=\"toggleExpandPayload()\"\n          >\n            <div class=\"truncate\">\n              <span v-if=\"entry.prefix !== undefined\" class=\"!inline\">{{\n                entry.prefix\n              }}</span>\n              {{ entry.payload }}\n            </div>\n          </div>\n        </div>\n        <ButtonSecondary\n          v-tippy=\"{ theme: 'tooltip' }\"\n          :title=\"t('action.copy')\"\n          :icon=\"copyQueryIcon\"\n          class=\"hidden group-hover:inline-flex\"\n          @click=\"copyQuery(entry.payload)\"\n        />\n        <ButtonSecondary\n          :icon=\"IconChevronDown\"\n          class=\"transform\"\n          :class=\"{ 'rotate-180': !minimized }\"\n          @click=\"toggleExpandPayload()\"\n        />\n      </div>\n    </div>\n    <div v-if=\"!minimized\" class=\"overflow-hidden bg-primaryContrast\">\n      <SmartTabs\n        v-model=\"selectedTab\"\n        styles=\"bg-primaryLight\"\n        render-inactive-tabs\n      >\n        <SmartTab v-if=\"isJSON(entry.payload)\" id=\"json\" label=\"JSON\" />\n        <SmartTab id=\"raw\" label=\"Raw\" />\n      </SmartTabs>\n      <div\n        class=\"z-10 flex items-center justify-between pl-4 border-b border-dividerLight top-lowerSecondaryStickyFold\"\n      >\n        <label class=\"font-semibold truncate text-secondaryLight\">\n          {{ t(\"response.body\") }}\n        </label>\n        <div class=\"flex\">\n          <ButtonSecondary\n            v-tippy=\"{ theme: 'tooltip' }\"\n            :title=\"t('state.linewrap')\"\n            :class=\"{ '!text-accent': linewrapEnabled }\"\n            :icon=\"IconWrapText\"\n            @click.prevent=\"linewrapEnabled = !linewrapEnabled\"\n          />\n          <ButtonSecondary\n            v-tippy=\"{ theme: 'tooltip' }\"\n            :title=\"t('action.download_file')\"\n            :icon=\"downloadIcon\"\n            @click=\"downloadResponse\"\n          />\n          <ButtonSecondary\n            v-tippy=\"{ theme: 'tooltip' }\"\n            :title=\"t('action.copy')\"\n            :icon=\"copyIcon\"\n            @click=\"copyResponse\"\n          />\n        </div>\n      </div>\n      <div ref=\"editor\"></div>\n      <div\n        v-if=\"outlinePath && selectedTab === 'json'\"\n        class=\"sticky bottom-0 z-10 flex flex-shrink-0 px-2 overflow-auto overflow-x-auto border-t bg-primaryLight border-dividerLight flex-nowrap\"\n      >\n        <div\n          v-for=\"(item, index) in outlinePath\"\n          :key=\"`item-${index}`\"\n          class=\"flex items-center\"\n        >\n          <tippy\n            interactive\n            trigger=\"click\"\n            theme=\"popover\"\n            :on-shown=\"() => tippyActions.focus()\"\n          >\n            <div v-if=\"item.kind === 'RootObject'\" class=\"outline-item\">{}</div>\n            <div v-if=\"item.kind === 'RootArray'\" class=\"outline-item\">[]</div>\n            <div v-if=\"item.kind === 'ArrayMember'\" class=\"outline-item\">\n              {{ item.index }}\n            </div>\n            <div v-if=\"item.kind === 'ObjectMember'\" class=\"outline-item\">\n              {{ item.name }}\n            </div>\n            <template #content=\"{ hide }\">\n              <div\n                v-if=\"\n                  item.kind === 'ArrayMember' || item.kind === 'ObjectMember'\n                \"\n              >\n                <div\n                  v-if=\"item.kind === 'ArrayMember'\"\n                  ref=\"tippyActions\"\n                  class=\"flex flex-col focus:outline-none\"\n                  tabindex=\"0\"\n                  @keyup.escape=\"hide()\"\n                >\n                  <SmartItem\n                    v-for=\"(arrayMember, astIndex) in item.astParent.values\"\n                    :key=\"`ast-${astIndex}`\"\n                    :label=\"`${astIndex}`\"\n                    @click=\"\n                      () => {\n                        jumpCursor(arrayMember)\n                        hide()\n                      }\n                    \"\n                  />\n                </div>\n                <div\n                  v-if=\"item.kind === 'ObjectMember'\"\n                  ref=\"tippyActions\"\n                  class=\"flex flex-col focus:outline-none\"\n                  tabindex=\"0\"\n                  @keyup.escape=\"hide()\"\n                >\n                  <SmartItem\n                    v-for=\"(objectMember, astIndex) in item.astParent.members\"\n                    :key=\"`ast-${astIndex}`\"\n                    :label=\"objectMember.key.value\"\n                    @click=\"\n                      () => {\n                        jumpCursor(objectMember)\n                        hide()\n                      }\n                    \"\n                  />\n                </div>\n              </div>\n              <div\n                v-if=\"item.kind === 'RootObject'\"\n                ref=\"tippyActions\"\n                class=\"flex flex-col focus:outline-none\"\n              >\n                <SmartItem\n                  label=\"{}\"\n                  @click=\"\n                    () => {\n                      jumpCursor(item.astValue)\n                      hide()\n                    }\n                  \"\n                />\n              </div>\n              <div\n                v-if=\"item.kind === 'RootArray'\"\n                ref=\"tippyActions\"\n                class=\"flex flex-col focus:outline-none\"\n              >\n                <SmartItem\n                  label=\"[]\"\n                  @click=\"\n                    () => {\n                      jumpCursor(item.astValue)\n                      hide()\n                    }\n                  \"\n                />\n              </div>\n            </template>\n          </tippy>\n          <icon-lucide-chevron-right\n            v-if=\"index + 1 !== outlinePath.length\"\n            class=\"opacity-50 text-secondaryLight svg-icons\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n  <div v-else>{{ t(\"response.waiting_for_connection\") }}</div>\n</template>\n\n<script setup lang=\"ts\">\nimport IconInfo from \"~icons/lucide/info\"\nimport IconUpRight from \"~icons/lucide/arrow-up-right\"\nimport IconDownLeft from \"~icons/lucide/arrow-down-left\"\nimport IconCopy from \"~icons/lucide/copy\"\nimport IconCheck from \"~icons/lucide/check\"\nimport IconChevronDown from \"~icons/lucide/chevron-down\"\nimport IconWrapText from \"~icons/lucide/wrap-text\"\nimport * as LJSON from \"lossless-json\"\nimport * as O from \"fp-ts/Option\"\nimport { pipe } from \"fp-ts/function\"\nimport { ref, computed, reactive, watch, markRaw } from \"vue\"\nimport { refAutoReset, useTimeAgo } from \"@vueuse/core\"\nimport { LogEntryData } from \"./Log.vue\"\nimport { useI18n } from \"@composables/i18n\"\nimport { copyToClipboard } from \"~/helpers/utils/clipboard\"\nimport { isJSON } from \"~/helpers/functional/json\"\nimport { useCopyResponse, useDownloadResponse } from \"@composables/lens-actions\"\nimport { useCodemirror } from \"@composables/codemirror\"\nimport jsonParse, { JSONObjectMember, JSONValue } from \"~/helpers/jsonParse\"\nimport { getJSONOutlineAtPos } from \"~/helpers/newOutline\"\nimport {\n  convertIndexToLineCh,\n  convertLineChToIndex,\n} from \"~/helpers/editor/utils\"\nimport { shortDateTime } from \"~/helpers/utils/date\"\n\nconst t = useI18n()\n\nconst props = defineProps<{ entry: LogEntryData }>()\n\n// Template refs\nconst tippyActions = ref<any | null>(null)\nconst editor = ref<any | null>(null)\nconst linewrapEnabled = ref(true)\n\nconst logPayload = computed(() => props.entry.payload)\n\nconst selectedTab = ref<\"json\" | \"raw\">(\n  isJSON(props.entry.payload) ? \"json\" : \"raw\"\n)\n\n// CodeMirror Implementation\nconst jsonBodyText = computed(() =>\n  pipe(\n    logPayload.value,\n    O.tryCatchK(LJSON.parse),\n    O.map((val) => LJSON.stringify(val, undefined, 2)),\n    O.getOrElse(() => logPayload.value)\n  )\n)\n\nconst ast = computed(() =>\n  pipe(\n    jsonBodyText.value,\n    O.tryCatchK(jsonParse),\n    O.getOrElseW(() => null)\n  )\n)\n\nconst editorText = computed(() => {\n  if (selectedTab.value === \"json\") return jsonBodyText.value\n  else return logPayload.value\n})\n\nconst editorMode = computed(() => {\n  if (selectedTab.value === \"json\") return \"application/ld+json\"\n  else return \"text/plain\"\n})\n\nconst { cursor } = useCodemirror(\n  editor,\n  editorText,\n  reactive({\n    extendedEditorConfig: {\n      mode: editorMode,\n      readOnly: true,\n      lineWrapping: linewrapEnabled,\n    },\n    linter: null,\n    completer: null,\n    environmentHighlights: false,\n  })\n)\n\nconst jumpCursor = (ast: JSONValue | JSONObjectMember) => {\n  const pos = convertIndexToLineCh(jsonBodyText.value, ast.start)\n  pos.line--\n  cursor.value = pos\n}\n\nconst outlinePath = computed(() =>\n  pipe(\n    ast.value,\n    O.fromNullable,\n    O.map((ast) =>\n      getJSONOutlineAtPos(\n        ast,\n        convertLineChToIndex(jsonBodyText.value, cursor.value)\n      )\n    ),\n    O.getOrElseW(() => null)\n  )\n)\n\n// Code for UI Changes\nconst minimized = ref(true)\nwatch(minimized, () => {\n  selectedTab.value = isJSON(props.entry.payload) ? \"json\" : \"raw\"\n})\n\nconst toggleExpandPayload = () => {\n  minimized.value = !minimized.value\n}\n\nconst { copyIcon, copyResponse } = useCopyResponse(logPayload)\n\nconst { downloadIcon, downloadResponse } = useDownloadResponse(\n  \"application/json\",\n  logPayload\n)\n\nconst copyQueryIcon = refAutoReset<typeof IconCopy | typeof IconCheck>(\n  IconCopy,\n  1000\n)\n\nconst copyQuery = (entry: string) => {\n  copyToClipboard(entry)\n  copyQueryIcon.value = IconCheck\n}\n\n// Relative Time\n// TS could be undefined here. We're just assigning a default value to 0 because we're not showing it in the UI\nconst relativeTime = useTimeAgo(computed(() => props.entry.ts ?? 0))\n\nconst ENTRY_COLORS = {\n  connected: \"#10b981\",\n  connecting: \"#10b981\",\n  error: \"#ff5555\",\n  disconnected: \"#ff5555\",\n} as const\n\n// Assigns color based on entry event\nconst entryColor = computed(() => ENTRY_COLORS[props.entry.event])\n\nconst ICONS = {\n  info: {\n    icon: IconInfo,\n    iconColor: \"#10b981\",\n  },\n  client: {\n    icon: IconUpRight,\n    iconColor: \"#eaaa45\",\n  },\n  server: {\n    icon: IconDownLeft,\n    iconColor: \"#38d4ea\",\n  },\n  disconnected: {\n    icon: IconInfo,\n    iconColor: \"#ff5555\",\n  },\n} as const\n\nconst iconColor = computed(() => ICONS[props.entry.source].iconColor)\nconst icon = computed(() => markRaw(ICONS[props.entry.source].icon))\n</script>\n\n<style lang=\"scss\" scoped>\n.realtime-log {\n  @apply text-secondary;\n  @apply overflow-hidden;\n  @apply hover:cursor-nsResize;\n\n  &,\n  span {\n    @apply select-text;\n  }\n\n  span {\n    @apply block;\n    @apply break-words break-all;\n  }\n}\n\n.outline-item {\n  @apply cursor-pointer;\n  @apply flex-grow-0 flex-shrink-0;\n  @apply text-secondaryLight;\n  @apply inline-flex;\n  @apply items-center;\n  @apply px-2;\n  @apply py-1;\n  @apply transition;\n  @apply hover: text-secondary;\n}\n\n.ts-font {\n  font-size: 0.6rem;\n}\n</style>\n","<template>\n  <div class=\"flex flex-col flex-1 overflow-auto whitespace-nowrap\">\n    <div\n      v-if=\"log.length !== 0\"\n      class=\"sticky top-0 z-10 flex items-center justify-between flex-shrink-0 pl-4 overflow-x-auto border-b bg-primary border-dividerLight\"\n    >\n      <label for=\"log\" class=\"font-semibold truncate text-secondaryLight\">\n        {{ title }}\n      </label>\n      <div class=\"flex\">\n        <ButtonSecondary\n          v-tippy=\"{ theme: 'tooltip' }\"\n          :title=\"t('action.delete')\"\n          :icon=\"IconTrash\"\n          @click=\"emit('delete')\"\n        />\n        <ButtonSecondary\n          id=\"bottompage\"\n          v-tippy=\"{ theme: 'tooltip' }\"\n          :title=\"t('action.scroll_to_top')\"\n          :icon=\"IconArrowUp\"\n          @click=\"scrollTo('top')\"\n        />\n        <ButtonSecondary\n          id=\"bottompage\"\n          v-tippy=\"{ theme: 'tooltip' }\"\n          :title=\"t('action.scroll_to_bottom')\"\n          :icon=\"IconArrowDown\"\n          @click=\"scrollTo('bottom')\"\n        />\n        <ButtonSecondary\n          id=\"bottompage\"\n          v-tippy=\"{ theme: 'tooltip' }\"\n          :title=\"`${t('action.autoscroll')}: ${\n            autoScrollEnabled ? t('action.turn_off') : t('action.turn_on')\n          }`\"\n          :icon=\"IconChevronsDown\"\n          :class=\"toggleAutoscrollColor\"\n          @click=\"toggleAutoscroll()\"\n        />\n      </div>\n    </div>\n    <div\n      v-if=\"log.length !== 0\"\n      ref=\"logs\"\n      class=\"flex flex-col flex-1 overflow-y-auto\"\n    >\n      <div class=\"border-b border-dividerLight\">\n        <div class=\"flex flex-col divide-y divide-dividerLight\">\n          <RealtimeLogEntry\n            v-for=\"(entry, index) in log\"\n            :key=\"`entry-${index}`\"\n            :entry=\"entry\"\n          />\n        </div>\n      </div>\n    </div>\n    <AppShortcutsPrompt v-else class=\"p-4\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, PropType, computed, watch } from \"vue\"\nimport IconTrash from \"~icons/lucide/trash\"\nimport IconArrowUp from \"~icons/lucide/arrow-up\"\nimport IconArrowDown from \"~icons/lucide/arrow-down\"\nimport IconChevronsDown from \"~icons/lucide/chevron-down\"\nimport { useThrottleFn, useScroll } from \"@vueuse/core\"\nimport { useI18n } from \"@composables/i18n\"\n\nexport type LogEntryData = {\n  prefix?: string\n  ts: number | undefined\n  source: \"info\" | \"client\" | \"server\" | \"disconnected\"\n  payload: string\n  event: \"connecting\" | \"connected\" | \"disconnected\" | \"error\"\n}\n\nconst props = defineProps({\n  log: { type: Array as PropType<LogEntryData[]>, default: () => [] },\n  title: {\n    type: String,\n    default: \"\",\n  },\n})\n\nconst emit = defineEmits<{\n  (e: \"delete\"): void\n}>()\n\nconst t = useI18n()\n\nconst logs = ref<HTMLElement>()\n\nconst autoScrollEnabled = ref(true)\n\nconst logListScroll = useScroll(logs)\n\n// Disable autoscroll when scrolling to top\nwatch(logListScroll.isScrolling, (isScrolling) => {\n  if (isScrolling && logListScroll.directions.top)\n    autoScrollEnabled.value = false\n})\n\nconst scrollTo = (position: \"top\" | \"bottom\") => {\n  if (position === \"top\") {\n    logs.value?.scroll({\n      behavior: \"smooth\",\n      top: 0,\n    })\n  } else if (position === \"bottom\") {\n    logs.value?.scroll({\n      behavior: \"smooth\",\n      top: logs.value?.scrollHeight,\n    })\n  }\n}\n\nwatch(\n  () => props.log,\n  useThrottleFn(() => {\n    if (autoScrollEnabled.value) scrollTo(\"bottom\")\n  }, 200),\n  { flush: \"post\" }\n)\n\nconst toggleAutoscroll = () => {\n  autoScrollEnabled.value = !autoScrollEnabled.value\n}\n\nconst toggleAutoscrollColor = computed(() =>\n  autoScrollEnabled.value ? \"text-green-500\" : \"text-red-500\"\n)\n</script>\n"],"names":["reWhitespace","trimmedEndIndex","string","index","reTrimStart","baseTrim","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","toNumber","value","isSymbol","isObject","other","isBinary","now","root","now$1","FUNC_ERROR_TEXT","nativeMax","nativeMin","debounce","func","wait","options","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","args","thisArg","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","flush","debounced","isInvoking","t","useI18n","tippyActions","ref","editor","linewrapEnabled","logPayload","computed","props","selectedTab","isJSON","jsonBodyText","pipe","O.tryCatchK","LJSON.parse","O.map","val","LJSON.stringify","O.getOrElse","ast","jsonParse","O.getOrElseW","editorText","editorMode","cursor","useCodemirror","reactive","jumpCursor","ast2","pos","convertIndexToLineCh","outlinePath","O.fromNullable","getJSONOutlineAtPos","convertLineChToIndex","minimized","watch","toggleExpandPayload","copyIcon","copyResponse","useCopyResponse","downloadIcon","downloadResponse","useDownloadResponse","copyQueryIcon","refAutoReset","IconCopy","copyQuery","entry","copyToClipboard","IconCheck","relativeTime","useTimeAgo","_a","ENTRY_COLORS","entryColor","ICONS","IconInfo","IconUpRight","IconDownLeft","iconColor","icon","markRaw","logs","autoScrollEnabled","logListScroll","useScroll","isScrolling","scrollTo","position","_c","_b","useThrottleFn","toggleAutoscroll","toggleAutoscrollColor"],"mappings":"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"}