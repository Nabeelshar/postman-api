import{f as p,ew as g,ex as y,e1 as k,V as f,g as b,ey as D,a5 as j,E as I,ez as $,a$ as w,eA as L,p as C,eB as S,eC as T,ab as E,ef as q,e3 as B,_ as U,o as i,d as s,e as t,t as a,a as n,c as H,m as l,e4 as N,aG as R,x as V,ed as A}from"./index.cb7d2b1b.js";const G=p({layout:"empty",setup(){const e=E(),o=g({query:y,variables:{inviteID:e.query.id},defer:!0});k(()=>{typeof e.query.id=="string"&&o.execute({inviteID:e.query.id})});const d=f(q,null),r=f(B,null),c=b(()=>d.value?!r.value:!1);return{E:D,inviteDetails:o,loadingCurrentUser:c,currentUser:r,toast:j(),t:I(),IconHome:$,invokeAction:w}},data(){return{invalidLink:!1,loading:!1,revokedLink:!1,inviteID:"",joinTeamSuccess:!1}},beforeMount(){L()},mounted(){typeof this.$route.query.id=="string"&&(this.inviteID=this.$route.query.id),this.invalidLink=!this.inviteID},methods:{joinTeam(){this.loading=!0,C(T(this.inviteID),S(()=>{this.loading=!1,this.toast.error(`${this.t("error.something_went_wrong")}`)},()=>{this.joinTeamSuccess=!0,this.loading=!1}))()},getErrorMessage(e){if(e.type==="network_error")return this.t("error.network_error");switch(e.error){case"team_invite/not_valid_viewer":return this.t("team.not_valid_viewer");case"team_invite/not_found":return this.t("team.not_found");case"team_invite/no_invite_found":return this.t("team.no_invite_found");case"team_invite/already_member":return this.t("team.already_member");case"team_invite/email_do_not_match":return this.t("team.email_do_not_match");default:return this.t("error.something_went_wrong")}}}}),M={class:"flex flex-col items-center justify-between min-h-screen"},P={key:0,class:"flex flex-col items-center justify-center flex-1"},z=t("i",{class:"pb-2 opacity-75 material-icons"},"error_outline",-1),F={class:"text-center heading"},O={class:"mt-2 text-center"},Q={key:1,class:"flex flex-col items-center justify-center flex-1 p-4"},W={key:2,class:"flex flex-col items-center justify-center flex-1 p-4"},J={class:"heading"},K={class:"mt-2"},X={key:3,class:"flex flex-col items-center justify-center flex-1 p-4"},Y={key:0,class:"flex flex-col items-center justify-center flex-1 p-4"},Z={key:1},x={key:0,class:"flex flex-col items-center p-4"},ee=t("i",{class:"mb-4 material-icons"},"error_outline",-1),te={class:"flex flex-col items-center p-4 mt-8 border rounded border-dividerLight"},ie={class:"mb-4"},se={class:"flex"},ae={key:1,class:"flex flex-col items-center justify-center flex-1 p-4"},ne={class:"heading"},oe={class:"mt-2 text-secondaryLight"},le={class:"mt-8"},re={key:2,class:"flex flex-col items-center justify-center flex-1 p-4"},de={class:"heading"},ce={class:"mt-2 text-secondaryLight"},me={class:"mt-8"},ue={class:"p-4"};function _e(e,o,d,r,c,he){var h;const m=N,u=R,v=A,_=V;return i(),s("div",M,[e.invalidLink?(i(),s("div",P,[z,t("h1",F,a(e.t("team.invalid_invite_link")),1),t("p",O,a(e.t("team.invalid_invite_link_description")),1)])):e.loadingCurrentUser?(i(),s("div",Q,[n(m)])):e.currentUser===null?(i(),s("div",W,[t("h1",J,a(e.t("team.login_to_continue")),1),t("p",K,a(e.t("team.login_to_continue_description")),1),n(u,{label:e.t("auth.login_to_hoppscotch"),class:"mt-8",onClick:o[0]||(o[0]=fe=>e.invokeAction("modals.login.toggle"))},null,8,["label"])])):(i(),s("div",X,[e.inviteDetails.loading?(i(),s("div",Y,[n(m)])):(i(),s("div",Z,[!e.inviteDetails.loading&&e.E.isLeft(e.inviteDetails.data)?(i(),s("div",x,[ee,t("p",null,a(e.getErrorMessage(e.inviteDetails.data.left)),1),t("p",te,[t("span",ie,a(e.t("team.logout_and_try_again")),1),t("span",se,[e.inviteDetails.data.left.type==="gql_error"?(i(),H(v,{key:0,outline:""})):l("",!0)])])])):l("",!0),!e.inviteDetails.loading&&e.E.isRight(e.inviteDetails.data)&&!e.joinTeamSuccess?(i(),s("div",ae,[t("h1",ne,a(e.t("team.join_team",{team:e.inviteDetails.data.right.teamInvitation.team.name})),1),t("p",oe,a(e.t("team.invited_to_team",{owner:(h=e.inviteDetails.data.right.teamInvitation.creator.displayName)!=null?h:e.inviteDetails.data.right.teamInvitation.creator.email,team:e.inviteDetails.data.right.teamInvitation.team.name})),1),t("div",le,[n(u,{label:e.t("team.join_team",{team:e.inviteDetails.data.right.teamInvitation.team.name}),loading:e.loading,disabled:e.revokedLink,onClick:e.joinTeam},null,8,["label","loading","disabled","onClick"])])])):l("",!0),!e.inviteDetails.loading&&e.E.isRight(e.inviteDetails.data)&&e.joinTeamSuccess?(i(),s("div",re,[t("h1",de,a(e.t("team.joined_team",{team:e.inviteDetails.data.right.teamInvitation.team.name})),1),t("p",ce,a(e.t("team.joined_team_description",{team:e.inviteDetails.data.right.teamInvitation.team.name})),1),t("div",me,[n(_,{to:"/",icon:e.IconHome,filled:"",label:e.t("app.home")},null,8,["icon","label"])])])):l("",!0)]))])),t("div",ue,[n(_,{class:"tracking-wide !font-bold !text-secondaryDark",label:"HOPPSCOTCH",to:"/"})])])}const pe=U(G,[["render",_e]]);export{pe as default};
//# sourceMappingURL=join-team.73084e06.js.map
