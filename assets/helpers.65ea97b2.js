import{f,h as c,ao as g,ap as q,o as C,d as v,a7 as _,p as r,ei as u,ej as i,ek as b,d2 as I,el as D,em as k,dY as a,en as w,eo as y,ep as B,eq as E,aZ as d,er as p,es as h,et as G,dW as L}from"./index.cb7d2b1b.js";const O=f({__name:"Intersection",emits:["intersecting"],setup(s,{emit:e}){const t=c(),n=c();return g(()=>{t.value=new IntersectionObserver(([o])=>{o&&o.isIntersecting&&e("intersecting",o)}),t.value.observe(n.value)}),q(()=>{t.value.disconnect()}),(o,l)=>(C(),v("div",{ref_key:"container",ref:n},[_(o.$slots,"default")],512))}}),m=10,S=async s=>{const e=[];for(;;){const t=await a({query:E,variables:{collectionID:s,cursor:e.length>0?e[e.length-1]:void 0}});if(d(t))return p(t.left);if(e.push(...t.right.collection.children.map(n=>n.id)),t.right.collection.children.length!==m)break}return h(e)},T=async s=>{const e=[];for(;;){const t=await a({query:G,variables:{collectionID:s,cursor:e.length>0?e[e.length-1].id:void 0}});if(d(t))return p(t.left);if(e.push(...t.right.requestsInCollection.map(n=>({id:n.id,request:L(JSON.parse(n.request)),collectionID:s,title:n.title}))),t.right.requestsInCollection.length!==m)break}return h(e)},A=s=>r(y,i("title",()=>r(()=>a({query:w,variables:{collectionID:s}}),u(e=>e.collection.title))),i("children",()=>r(()=>S(s),b(I(k(A),D)))),i("requests",()=>()=>T(s)),u(({title:e,children:t,requests:n})=>({id:s,children:t,requests:n,title:e}))),R=s=>{var e,t,n,o;return B({name:s.title,folders:(t=(e=s.children)==null?void 0:e.map(R))!=null?t:[],requests:(o=(n=s.requests)==null?void 0:n.map(l=>l.request))!=null?o:[]})};export{m as B,O as _,A as g,R as t};
//# sourceMappingURL=helpers.65ea97b2.js.map
