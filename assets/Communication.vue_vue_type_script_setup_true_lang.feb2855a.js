import{I as W,a as P,l as Y,_ as U}from"./json.50ff94ee.js";import{o as d,d as _,e as n,f as G,E as Q,h as i,W as X,g as O,b4 as Z,bf as ee,N as C,a as c,i as r,v as te,j as e,m as T,t as A,w as $,k as ne,F as oe,l as se,aV as le,c as S,Y as ae,bg as ie,az as ce,b9 as re,p as de,bh as ue,I as F,bb as pe,x as me,r as fe,z as ve,a5 as _e,C as ye}from"./index.cb7d2b1b.js";import{u as he,a as ke,i as xe}from"./utils.30b28a2e.js";import{c as be,f as ge}from"./TaskOption.1d4f6c52.js";import{r as we}from"./files.4937b996.js";const Ce={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},$e=n("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[n("path",{d:"M4 11a9 9 0 0 1 9 9M4 4a16 16 0 0 1 16 16"}),n("circle",{cx:"5",cy:"19",r:"1"})],-1),Se=[$e];function Ne(m,b){return d(),_("svg",Ce,Se)}const Be={name:"lucide-rss",render:Ne},Ie={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Me=n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M22 2L11 13M22 2l-7 20l-4-9l-9-4l20-7z"},null,-1),je=[Me];function Le(m,b){return d(),_("svg",Ie,je)}const Oe={name:"lucide-send",render:Le},Te={class:"flex flex-col flex-1"},Ae=["placeholder"],Fe={class:"flex items-center"},Ee={class:"font-semibold truncate text-secondaryLight"},ze={class:"select-wrapper"},He=["onKeyup"],Je={class:"flex"},Ve={for:"payload"},Pe=G({__name:"Communication",props:{showEventField:{type:Boolean,default:!1},eventFieldStyles:{type:String,default:""},stickyHeaderStyles:{type:String,default:""},isConnected:{type:Boolean,default:!1}},emits:["send-message"],setup(m,{emit:b}){const t=Q(),g=_e(),N=i(null),y=i(!0),B=i(),I=i(),w=X(P,1e3),h=i(!1),M={JSON:"application/ld+json",Raw:"text/plain"},E=Object.keys(M),s=i("JSON"),k=i(""),l=i(""),z=O(()=>M[s.value]),H=O(()=>xe(s.value)?Y:null);he(B,l,Z({extendedEditorConfig:{lineWrapping:y,mode:z,placeholder:t("websocket.message").toString()},linter:H,completer:null,environmentHighlights:!0}));const j=()=>{h.value&&(l.value="",k.value="")},L=()=>{!l.value||(b("send-message",{eventName:k.value,message:l.value}),j())},J=async f=>{var x;const o=await de((x=f.target.files)==null?void 0:x[0],ge,be(we))();ue(o)?(l.value=o.value,g.success(`${t("state.file_imported")}`)):g.error(`${t("action.choose_file")}`)},V=()=>{try{const f=JSON.parse(l.value);l.value=JSON.stringify(f,null,2),w.value=F}catch(f){console.error(f),w.value=pe,g.error(`${t("error.json_prettify_invalid_body")}`)}};return ee("request.send-cancel",L),(f,o)=>{const x=Be,u=me,q=ye,R=fe("tippy"),D=U,p=ve("tippy");return d(),_("div",Te,[m.showEventField?(d(),_("div",{key:0,class:C(["sticky z-10 flex items-center justify-center flex-shrink-0 overflow-x-auto border-b bg-primary border-dividerLight",m.eventFieldStyles])},[c(x,{class:"mx-4 svg-icons text-accentLight"}),r(n("input",{id:"event_name","onUpdate:modelValue":o[0]||(o[0]=a=>k.value=a),class:"w-full py-2 pr-4 truncate bg-primary",name:"event_name",placeholder:`${e(t)("socketio.event_name")}`,type:"text",autocomplete:"off"},null,8,Ae),[[te,k.value]])],2)):T("",!0),n("div",{class:C(["sticky z-10 flex items-center justify-between flex-shrink-0 pl-4 overflow-x-auto border-b bg-primary border-dividerLight",m.stickyHeaderStyles])},[n("span",Fe,[n("label",Ee,A(e(t)("websocket.message")),1),c(R,{interactive:"",trigger:"click",theme:"popover","on-shown":()=>N.value.focus()},{content:$(({hide:a})=>[n("div",{ref_key:"tippyActions",ref:N,class:"flex flex-col focus:outline-none",tabindex:"0",onKeyup:ne(v=>a(),["escape"])},[(d(!0),_(oe,null,se(e(E),(v,K)=>(d(),S(q,{key:`contentTypeItem-${K}`,label:v,"info-icon":v===s.value?e(F):void 0,"active-info-icon":v===s.value,onClick:()=>{s.value=v,a()}},null,8,["label","info-icon","active-info-icon","onClick"]))),128))],40,He)]),default:$(()=>[n("span",ze,[c(u,{label:s.value||e(t)("state.none").toLowerCase(),class:"pr-8 ml-2 rounded-none"},null,8,["label"])])]),_:1},8,["on-shown"])]),n("div",Je,[r(c(u,{title:`${e(t)("request.run")} <kbd>${e(le)()}</kbd><kbd>\u21A9</kbd>`,label:`${e(t)("action.send")}`,disabled:!l.value||!m.isConnected,icon:e(Oe),class:"rounded-none !text-accent !hover:text-accentDark",onClick:o[1]||(o[1]=a=>L())},null,8,["title","label","disabled","icon"]),[[p,{theme:"tooltip",delay:[500,20],allowHTML:!0}]]),r((d(),S(D,{on:h.value,class:"px-2",title:`${e(t)("mqtt.clear_input_on_send")}`,onChange:o[2]||(o[2]=a=>h.value=!h.value)},{default:$(()=>[ae(A(e(t)("mqtt.clear_input")),1)]),_:1},8,["on","title"])),[[p,{theme:"tooltip"}]]),r(c(u,{to:"https://docs.hoppscotch.io/realtime",blank:"",title:e(t)("app.wiki"),icon:e(ie)},null,8,["title","icon"]),[[p,{theme:"tooltip"}]]),r(c(u,{title:e(t)("action.clear"),icon:e(ce),onClick:j},null,8,["title","icon"]),[[p,{theme:"tooltip"}]]),r(c(u,{title:e(t)("state.linewrap"),class:C({"!text-accent":y.value}),icon:e(ke),onClick:o[3]||(o[3]=re(a=>y.value=!y.value,["prevent"]))},null,8,["title","class","icon"]),[[p,{theme:"tooltip"}]]),s.value&&s.value=="JSON"?r((d(),S(u,{key:0,title:e(t)("action.prettify"),icon:e(w),onClick:V},null,8,["title","icon"])),[[p,{theme:"tooltip"}]]):T("",!0),n("label",Ve,[r(c(u,{title:e(t)("import.title"),icon:e(W),onClick:o[4]||(o[4]=a=>I.value.click())},null,8,["title","icon"]),[[p,{theme:"tooltip"}]])]),n("input",{ref_key:"payload",ref:I,class:"input",name:"payload",type:"file",onChange:J},null,544)])],2),n("div",{ref_key:"wsCommunicationBody",ref:B,class:"flex flex-col flex-1"},null,512)])}}});export{Pe as _,Be as a};
//# sourceMappingURL=Communication.vue_vue_type_script_setup_true_lang.feb2855a.js.map
